
```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

[![Build Status](https://travis-ci.org/mpadge/paretoconv.svg)](https://travis-ci.org/mpadge/paretoconv) 
[![codecov](https://codecov.io/gh/mpadge/paratoconv/branch/master/graph/badge.svg)](https://codecov.io/gh/mpadge/paretoconv)
[![Project Status: WIP](http://www.repostatus.org/badges/0.1.0/wip.svg)](http://www.repostatus.org/#wip)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/paretoconv)](http://cran.r-project.org/web/packages/paretoconv) 

# paretoconv

An `R` package to calculate the $n$-fold convolution of Pareto distributions.
*f(x)=a x<sup>1-a</sup>*,
for *x>0*, *a>1* using the techniques devised by Colin Ramsay in

1. 'The Distribution of Sums of Certain I.I.D.  Pareto Variates' (*Communications
   in Statistics - Theory and Methods* **35**:395-405, 2006); and

2. 'The Distribution of Sums of I.I.D. Pareto Random Variables with Arbitrary
   Shape Parameter' (*Communications in Statistics - Theory and Methods*
   **37**:2177-2184, 2008).

The package contains only one function:
```
paretoconv (x, a, n)
```
where `n` specifies the number of convolutions. Both this and `a` must be
single-valued, while `x` can be a vector. 

-----

### News

- Initial working version 

### Installation

```{r git-install, eval=FALSE}
devtools::install_github("mpadge/paretoconv")
```

```{r install, echo=FALSE, message=FALSE}
wd <- getwd ()
while (length (grep ('paretoconv', getwd ())) > 0) setwd ("..")
devtools::load_all ("paretoconv")
#devtools::load_all ("paretoconv", recompile=TRUE)
#devtools::document ("paretoconv")
#goodpractice::gp ("paretoconv")
setwd (wd)
#testthat::test_dir ("./tests/")
```

```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
options(width=120)
```

-----

### Usage

```{r usage}
library(paretoconv)
packageVersion("paretoconv") 
```

### Example

Solid lines in the figure below are a reproduction of Ramsay's (2006) Figure 2
of probability density functions for the first 5 convolutions of the Pareto pdf
with shape parameter of *a=5*. Dashed lines are analogous values for the
non-integer value of *a=4.5*.

```{r example, eval=FALSE}
x <- 1:50 / 10
n <- 1:5
yint <- lapply (n, function (i) paretoconv (x=x, a=5, n=i))
ynon <- lapply (n, function (i) paretoconv (x=x, a=4.5, n=i))
cols <- rainbow (length (n))
plot (NULL, NULL, xlim=range (x), ylim=range (yint), xlab="x", ylab="p")
for (i in n) {
    lines (x, yint [[i]], col=cols [i])
    lines (x, ynon [[i]], col=cols [i], lty=2)
}
legend ("topright", lwd=1, col=cols, bty="n", 
        legend=sapply (seq (n), function (i) paste0 ("n=", i)))
```
![](./fig/README-example.png)


-----

### Test Results

```{r test, eval=TRUE}
date()
testthat::test_dir("tests/")
```
